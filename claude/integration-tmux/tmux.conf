# Claude Code status-aware tab coloring
# @claude_status values: computing (red), prompt (yellow), unread (cyan), idle (green)

# Inactive window format
set -g window-status-format '\
#{?#{@claude_status},\
#[fg=#{?#{==:#{@claude_status},computing},red,#{?#{==:#{@claude_status},prompt},yellow,#{?#{==:#{@claude_status},unread},brightcyan,green}}}],\
#[fg=white]}\
#[bg=colour16,dim] #I.#W '

# Active window format
set -g window-status-current-format '\
#{?#{@claude_status},\
#[fg=#{?#{==:#{@claude_status},computing},red,#{?#{==:#{@claude_status},prompt},yellow,#{?#{==:#{@claude_status},unread},brightcyan,green}}}],\
#[fg=cyan]}\
#[bg=colour16,bright] #I.#W '

# Clear unread status when switching to window
set-hook -g session-window-changed 'if-shell "[ \"$(tmux show-option -wqv @claude_status)\" = \"unread\" ]" "set-option -w @claude_status idle"'

# Restore Claude tab colors after tmux restart
set-hook -g client-attached 'run-shell "$HOME/dotfiles/claude/integration-tmux/tmux-init.sh"'
